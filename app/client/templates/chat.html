{% extends "base.html" %}

{% block title %}
SwiftMessengr - Chat
{% endblock %}

{% block style %}
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}" /> -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/new.css') }}" />
<link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="ui-container">
    <div class="sidebar">
        <div class="search-container">
            <input type="text" placeholder="Search here..." />
        </div>
        <div class="group-container" id="group-container">
            <span class="separator top-separator"></span>
            {% for group in groups %}
            {% if group.creator == user.username %}
                {% if group.id == current_chat_group %}
                <a href="/chat/group/{{ group.id }}" class="group {{ active }}" data-group-id="{{ group.id }}">
                    <img class="group-picture" src="{{ url_for('static', filename='files/'+group.image_path) }}" alt="group logo">
                    <p class="group-name">{{ group.name }}</p>
                </a>
                <span class="separator"></span>
                {% else %}
                <a href="/chat/group/{{ group.id }}" class="group" data-group-id="{{ group.id }}">
                    <img class="group-picture" src="{{ url_for('static', filename='files/'+group.image_path) }}" alt="group logo">
                    <p class="group-name">{{ group.name }}</p>
                </a>
                <span class="separator"></span>
                {% endif %}
            {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- <div class="chat-area">
        {% block chat_area %}
        {% endblock %}
    </div> -->

    <dialog id="room-form" class="room-form">
        <button id="room-close-btn" class="close-button">
            <img src="{{ url_for('static', filename='media/close.png') }}" alt="close button">
        </button>
        <form action="/api/chat/create" method="post" enctype="multipart/form-data">
            <input type="text" id="room-name" name="room-name" placeholder="Group name..." required>
            <input id="choose-image-input" name="image-file" type="file" accept="image/*" hidden>
            <!-- not a button because a button would submit the form -->
            <div class="form-btn form-btn-div" id="choose-image">
                <span>Select an image</span>
            </div>
            <div class="new-img-container" id="new-img-container"></div>
            <button class="form-btn" id="submit-form">Confirm</button>
        </form>
        <p id="error-message">The name must be less than 100 characters!</p>
    </dialog>
</div>


<!-- button to create a new chat group -->
<!-- <div class="btn-container"> -->
    <button class="new-chat-group" id="create-room-btn">
        <i class='bx bxs-message-add'></i>
    </button>
    <span class="tooltip">
        <p>Create a new chat group</p>
    </span>
    <span class="arrow"></span>
<!-- </div> -->

{% endblock %}